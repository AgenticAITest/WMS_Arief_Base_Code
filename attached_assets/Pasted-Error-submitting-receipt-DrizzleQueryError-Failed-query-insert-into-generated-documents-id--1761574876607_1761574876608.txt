Error submitting receipt: DrizzleQueryError: Failed query: insert into "generated_documents" ("id", "tenant_id", "document_type", "document_number", "reference_type", "reference_id", "files", "version", "generated_by", "created_at", "updated_at") values (default, $1, $2, $3, $4, $5, $6, $7, $8, default, default) returning "id", "tenant_id", "document_type", "document_number", "reference_type", "reference_id", "files", "version", "generated_by", "created_at", "updated_at"
params: 8e017478-2f5f-4be3-b8b6-e389436ca28a,goods_receipt_note,GRN-2510-WH1-0002,purchase_order,22104b29-d3d1-4131-bb78-76933c076f60,{"html":{"path":"storage/purchase-order/documents/tenants/8e017478-2f5f-4be3-b8b6-e389436ca28a/grn/2025/GRN-2510-WH1-0002.html","size":8560,"generated_at":"2025-10-27T14:20:15.694Z"}},1,4f56c3b2-9e5e-4a75-9326-ccb3ef02bd82
    at PostgresJsPreparedQuery.queryWithCache (/home/runner/workspace/node_modules/src/pg-core/session.ts:73:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/node_modules/src/postgres-js/session.ts:58:17)
    at async <anonymous> (/home/runner/workspace/src/modules/purchase-order/server/routes/purchaseOrderRoutes.ts:3049:24)
    at async scope (file:///home/runner/workspace/node_modules/postgres/src/index.js:260:18)
    at async Function.begin (file:///home/runner/workspace/node_modules/postgres/src/index.js:243:14)
    at async <anonymous> (/home/runner/workspace/src/modules/purchase-order/server/routes/purchaseOrderRoutes.ts:2855:20) {
  query: 'insert into "generated_documents" ("id", "tenant_id", "document_type", "document_number", "reference_type", "reference_id", "files", "version", "generated_by", "created_at", "updated_at") values (default, $1, $2, $3, $4, $5, $6, $7, $8, default, default) returning "id", "tenant_id", "document_type", "document_number", "reference_type", "reference_id", "files", "version", "generated_by", "created_at", "updated_at"',
  params: [
    '8e017478-2f5f-4be3-b8b6-e389436ca28a',
    'goods_receipt_note',
    'GRN-2510-WH1-0002',
    'purchase_order',
    '22104b29-d3d1-4131-bb78-76933c076f60',
    '{"html":{"path":"storage/purchase-order/documents/tenants/8e017478-2f5f-4be3-b8b6-e389436ca28a/grn/2025/GRN-2510-WH1-0002.html","size":8560,"generated_at":"2025-10-27T14:20:15.694Z"}}',
    1,
    '4f56c3b2-9e5e-4a75-9326-ccb3ef02bd82'
  ],
  cause: PostgresError: duplicate key value violates unique constraint "gen_docs_ref_idx"
      at ErrorResponse (file:///home/runner/workspace/node_modules/postgres/src/connection.js:794:26)
      at handle (file:///home/runner/workspace/node_modules/postgres/src/connection.js:480:6)
      at TLSSocket.data (file:///home/runner/workspace/node_modules/postgres/src/connection.js:315:9)
      at TLSSocket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
    severity_local: 'ERROR',
    severity: 'ERROR',
    code: '23505',
    detail: 'Key (tenant_id, reference_type, reference_id)=(8e017478-2f5f-4be3-b8b6-e389436ca28a, purchase_order, 22104b29-d3d1-4131-bb78-76933c076f60) already exists.',
    schema_name: 'public',
    table_name: 'generated_documents',
    constraint_name: 'gen_docs_ref_idx',
    file: 'nbtinsert.c',
    line: '666',
    routine: '_bt_check_unique'